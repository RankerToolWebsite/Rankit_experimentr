<div id="debrief">

<p>
<strong>Please copy and paste the following code back on Mechanical Turk before closing this window:</strong>
</p>
<h2 id="postId"></h2>

<p class="placeholder">
Thank you! The experiment is almost complete. Please fill out the following demographics form.
</p>
<br>
<h4>Rate how much you agree or disagree with the following the statements:</h4>
<div id="question1"><b>1. The final ranking generated by the system reflected my personal preferences about colleges. </b>
    <br>
    <div id="question1s">
        <input type="radio" id="a1" name="question1" value= -2> Strongly Disagree   
        <input type="radio" id="a2" name="question1" value=-1> Disagree   
        <input type="radio" id="a3" name="question1" value=0> Neutral  
        <input type="radio" id="a4" name="question1" value=1> Agree  
        <input type="radio" id="a5" name="question1" value=2> Strongly Agree  
    </div>
</div> <br>
    
<div id="question2"><b>2. I would use this system to make decisions about colleges.</b>
    <br>
    <div id="question2s">
        <input type="radio" id="b1" name="question2" value= -2> Strongly Disagree   
        <input type="radio" id="b2" name="question2" value=-1> Disagree   
        <input type="radio" id="b3" name="question2" value=0> Neutral  
        <input type="radio" id="b4" name="question2" value=1> Agree  
        <input type="radio" id="b5" name="question2" value=2> Strongly Agree  
    </div>
</div> <br>
    
<div id="question3"><b>3. When I was entering colleges into the build tool, I could easily express my preferences. </b>
    <br>
    <div id="question3s">
        <input type="radio" id="c1" name="question3" value= -2> Strongly Disagree   
        <input type="radio" id="c2" name="question3" value=-1> Disagree   
        <input type="radio" id="c3" name="question3" value=0> Neutral  
        <input type="radio" id="c4" name="question3" value=1> Agree  
        <input type="radio" id="c5" name="question3" value=2> Strongly Agree  
    </div>
</div> <br>

<div id="question4"><b>4. The dataset contained all the colleges that I wanted to rank. </b>
    <br>
    <div id="question4s">
        <input type="radio" id="d1" name="question4" value= -2> Strongly Disagree   
        <input type="radio" id="d2" name="question4" value=-1> Disagree   
        <input type="radio" id="d3" name="question4" value=0> Neutral  
        <input type="radio" id="d4" name="question4" value=1> Agree  
        <input type="radio" id="d5" name="question4" value=2> Strongly Agree  
    </div>
</div> <br>
    
    <div id="question5"><b>5. The system displayed all the details about the colleges that I needed to compare them. </b>
    <br>
    <div id="question6s">
        <input type="radio" id="d1" name="question5" value= -2> Strongly Disagree   
        <input type="radio" id="d2" name="question5" value=-1> Disagree   
        <input type="radio" id="d3" name="question5" value=0> Neutral  
        <input type="radio" id="d4" name="question5" value=1> Agree  
        <input type="radio" id="d5" name="question5" value=2> Strongly Agree  
    </div>
</div> <br>
 
<p>
Thank you again for your participation. Feel free submit any additional comments below.
</p>

<textarea name="textarea" rows="10" cols="50">Leave feedback here</textarea>
<br>
<button id="submitComments" disabled="true" type="button">Submit</button>
<br>
<div id="submitFeedback"></div>

</div>


<style>
</style>

<script>
var expData = {};    
expData.interaction = "";    
    
(function() {
  var postId  = experimentr.postId()
    , data    = {};
    
d3.selectAll('input')
  .filter(function(d) { return this.name === 'question1' ? this : null; })
  .on('change', function() { data.question1 = this.value; validate(); });
  
  d3.selectAll('input')
  .filter(function(d) { return this.name === 'question2' ? this : null; })
  .on('change', function() { data.question2 = this.value; validate(); });
  
  d3.selectAll('input')
  .filter(function(d) { return this.name === 'question3' ? this : null; })
  .on('change', function() { data.question3 = this.value; validate(); });
  
  d3.selectAll('input')
  .filter(function(d) { return this.name === 'question4' ? this : null; })
  .on('change', function() { data.question4 = this.value; validate(); });
    
  d3.selectAll('input')
  .filter(function(d) { return this.name === 'question5' ? this : null; })
  .on('change', function() { data.question5 = this.value; validate(); });    
    
  d3.select("#postId").text(postId);

  var comments = d3.select('#debrief').select('textarea')
    .on('keypress', function() { d3.select('#submitComments').attr('disabled', null); })
    .on('blur', function() { d3.select('#submitComments').attr('disabled', null); });

  d3.select('#submitComments')
    .on('click', function () { data.comments = comments.property('value'); validate(); });

  function validate() {
    if( data.comments ) {
      expData.interaction ="FEEDBACK"
      experimentr.addData(data);
      experimentr.addData(expData);
      d3.select('#submitComments').attr('disabled', 'true');
      d3.select('#submitFeedback').text('Submit Successful');
    }
  }
}());
</script>
