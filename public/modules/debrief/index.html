<div id="debrief">

<p>
<strong>Please copy and paste the following code back on Mechanical Turk before closing this window:</strong>
</p>
<h2 id="postId"></h2>

<p class="placeholder">
Thank you! The experiment is almost complete. Please fill out the following demographics form.
</p>
<br>
<h4>Rate how much you agree or disagree with the following the statements:</h4>
<div id="pref"><b> The final ranking generated by the system reflected my personal preferences about colleges. </b>
    <br>
    <div id="prefs">
        <input type="radio" id="p1" name="pref" value="SD"> Strongly Disagree   
        <input type="radio" id="p2" name="pref" value="D"> Disagree   
        <input type="radio" id="p3" name="pref" value="N"> Neutral  
        <input type="radio" id="p4" name="pref" value="A"> Agree  
        <input type="radio" id="p5" name="pref" value="SA"> Strongly Agree  
    </div>
</div> <br>
    
<div id="decision"><b> I would use this system to make decisions about colleges.</b>
    <br>
    <div id="decisions">
        <input type="radio" id="d1" name="decision" value="SD"> Strongly Disagree   
        <input type="radio" id="d2" name="decision" value="D"> Disagree   
        <input type="radio" id="d3" name="decision" value="N"> Neutral  
        <input type="radio" id="d4" name="decision" value="A"> Agree  
        <input type="radio" id="d5" name="decision" value="SA"> Strongly Agree   
    </div>
</div> <br>
    
<div id="express"><b> When I was entering colleges into the build tool, I could easily express my preferences. </b>
    <br>
    <div id="expresses">
        <input type="radio" id="e1" name="express" value="SD"> Strongly Disagree   
        <input type="radio" id="e2" name="express" value="D"> Disagree   
        <input type="radio" id="e3" name="express" value="N"> Neutral  
        <input type="radio" id="e4" name="express" value="A"> Agree  
        <input type="radio" id="e5" name="express" value="SA"> Strongly Agree  
    </div>
</div> <br>

<div id="college"><b> The dataset contained all the colleges that I wanted to rank. </b>
    <br>
    <div id="colleges">
        <input type="radio" id="c1" name="college" value="SD"> Strongly Disagree   
        <input type="radio" id="c2" name="college" value="D"> Disagree   
        <input type="radio" id="c3" name="college" value="N"> Neutral  
        <input type="radio" id="c4" name="college" value="A"> Agree  
        <input type="radio" id="c5" name="college" value="SA"> Strongly Agree  
    </div>
</div> <br>

    
<div id="detail"><b>The system displayed all the details about the colleges that I needed to compare them.</b>

    <br>
    <div id="details">
        <input type="radio" id="de1" name="detail" value="SD"> Strongly Disagree   
        <input type="radio" id="de2" name="detail" value="D"> Disagree   
        <input type="radio" id="de3" name="detail" value="N"> Neutral  
        <input type="radio" id="de4" name="detail" value="A"> Agree  
        <input type="radio" id="de5" name="detail" value="SA"> Strongly Agree  
    </div>
</div> <br>
 
<p>
Thank you again for your participation. Feel free submit any additional comments below.
</p>

<textarea name="textarea" rows="10" cols="50">Leave feedback here</textarea>
<br>
<button id="submitComments" disabled="true" type="button">Submit</button>
<br>
<div id="submitFeedback"></div>

</div>


<style>
</style>

<script>
var expData = {};    
expData.interaction = "";    
    
(function() {
  var postId  = experimentr.postId()
    , data    = {};
    
d3.selectAll('input')
  .filter(function(d) { return this.name === 'pref' ? this : null; })
  .on('change', function() { data.pref = this.value; validate(); });
  
  d3.selectAll('input')
  .filter(function(d) { return this.name === 'decision' ? this : null; })
  .on('change', function() { data.decision = this.value; validate(); });
  
  d3.selectAll('input')
  .filter(function(d) { return this.name === 'express' ? this : null; })
  .on('change', function() { data.express = this.value; validate(); });
  
  d3.selectAll('input')
  .filter(function(d) { return this.name === 'college' ? this : null; })
  .on('change', function() { data.college = this.value; validate(); });
    
  d3.selectAll('input')
  .filter(function(d) { return this.name === 'detail' ? this : null; })
  .on('detail', function() { data.college = this.value; validate(); });   
    
  d3.select("#postId").text(postId);

  var comments = d3.select('#debrief').select('textarea')
    .on('keypress', function() { d3.select('#submitComments').attr('disabled', null); })
    .on('blur', function() { d3.select('#submitComments').attr('disabled', null); });

  d3.select('#submitComments')
    .on('click', function () { data.comments = comments.property('value'); validate(); });

  function validate() {
    if( data.comments ) {
      expData.interaction ="FEEDBACK"
      experimentr.addData(data);
      experimentr.addData(expData);
      d3.select('#submitComments').attr('disabled', 'true');
      d3.select('#submitFeedback').text('Submit Successful');
    }
  }
}());
</script>
